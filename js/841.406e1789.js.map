{"version":3,"file":"js/841.406e1789.js","mappings":"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","sources":["webpack://currency-exchanger/./src/components/UI/BaseWarning.vue","webpack://currency-exchanger/./src/components/UI/BaseWarning.vue?a402","webpack://currency-exchanger/./src/components/UI/BaseInput.vue?04ec","webpack://currency-exchanger/./src/components/UI/BaseInput.vue","webpack://currency-exchanger/./src/pages/TransferPage.vue?9c53","webpack://currency-exchanger/./src/pages/TransferPage.vue","webpack://currency-exchanger/./src/const/acceptableNetworks.ts","webpack://currency-exchanger/./src/helpers/TransferValidator.ts","webpack://currency-exchanger/./src/helpers/WalletTransferFacade.ts","webpack://currency-exchanger/./src/controllers/TransferPageController.vue?a0e5","webpack://currency-exchanger/./src/controllers/TransferPageController.vue"],"sourcesContent":["<template>\n    <div class=\"base-warning\">\n        <slot />\n    </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.base-warning {\n    color: $warn;\n    font-family: \"Gilroy Regular\";\n}\n</style>","import { render } from \"./BaseWarning.vue?vue&type=template&id=3d99b0b5&scoped=true\"\nconst script = {}\n\nimport \"./BaseWarning.vue?vue&type=style&index=0&id=3d99b0b5&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/kachalov/projects/currency-exchanger/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3d99b0b5\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, unref as _unref, vShow as _vShow, withCtx as _withCtx, withDirectives as _withDirectives, Transition as _Transition, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-86464a2e\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"base-input-container\" }\nconst _hoisted_2 = [\"value\"]\n\n\nimport BaseWarning from \"@/components/UI/BaseWarning\"\nimport BaseTitleRow from \"@/components/UI/BaseTitleRow.vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'BaseInput',\n  props: {\n    inputValue: String,\n    title: String,\n    error: {\n        type: Boolean,\n        default: false\n    },\n    errorText: String\n},\n  emits: [\"updateInputValue\"],\n  setup(__props, { emit: emits }) {\n\nconst props = __props\n\n\n\n\n\nfunction updateInputValue(event: any) {\n    emits(\"updateInputValue\", event.target.value, props.title)\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(BaseTitleRow, { title: __props.title }, null, 8, [\"title\"]),\n    _createElementVNode(\"input\", {\n      class: \"base-input\",\n      value: __props.inputValue,\n      onInput: updateInputValue,\n      placeholder: \"Input...\"\n    }, null, 40, _hoisted_2),\n    _createVNode(_Transition, { name: \"base-warning-transition\" }, {\n      default: _withCtx(() => [\n        _withDirectives(_createVNode(_unref(BaseWarning), { style: {\"margin-top\":\"5px\"} }, {\n          default: _withCtx(() => [\n            _createTextVNode(_toDisplayString(__props.errorText), 1)\n          ]),\n          _: 1\n        }, 512), [\n          [_vShow, __props.error]\n        ])\n      ]),\n      _: 1\n    })\n  ]))\n}\n}\n\n})","import script from \"./BaseInput.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./BaseInput.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./BaseInput.vue?vue&type=style&index=0&id=86464a2e&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/kachalov/projects/currency-exchanger/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-86464a2e\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, createBlock as _createBlock, createVNode as _createVNode, createElementVNode as _createElementVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-fa3aa3c4\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"button-container\" }\n\nimport BaseInput from \"@/components/UI/BaseInput\"\n\nimport BaseButton from \"@/components/UI/BaseButton.vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'TransferPage',\n  props: {\n    inputsData: Object\n},\n  emits: [\"updateInputAddress\", \"updateInputAmount\",\n    \"redirectWalletPage\", \"transferCurrency\"],\n  setup(__props, { emit: emits }) {\n\n\n\n\n\nfunction updateInputValue(value: string, title: string) {\n    switch (title) {\n        case \"Address\":\n            emits(\"updateInputAddress\", value)\n            break\n        case \"Amount\":\n            emits(\"updateInputAmount\", value)\n            break\n    }\n}\nfunction redirectWalletPage() {\n    emits(\"redirectWalletPage\")\n}\nfunction transferCurrency() {\n    emits(\"transferCurrency\")\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Object.keys(__props.inputsData), (input) => {\n      return (_openBlock(), _createBlock(_unref(BaseInput), {\n        key: __props.inputsData[input].title,\n        title: __props.inputsData[input].title,\n        \"input-value\": __props.inputsData[input].input,\n        onUpdateInputValue: updateInputValue,\n        error: __props.inputsData[input].error,\n        \"error-text\": `Incorrect ${__props.inputsData[input].title.toLowerCase()}`\n      }, null, 8, [\"title\", \"input-value\", \"error\", \"error-text\"]))\n    }), 128)),\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createVNode(BaseButton, {\n        title: 'cancel',\n        \"icon-name\": 'arrow-rotate-left',\n        onClick: redirectWalletPage\n      }),\n      _createVNode(BaseButton, {\n        title: 'send',\n        \"icon-name\": 'arrow-up',\n        onClick: transferCurrency\n      })\n    ])\n  ], 64))\n}\n}\n\n})","import script from \"./TransferPage.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./TransferPage.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./TransferPage.vue?vue&type=style&index=0&id=fa3aa3c4&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/kachalov/projects/currency-exchanger/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-fa3aa3c4\"]])\n\nexport default __exports__","export const ACCEPTABLE_NETWORKS = [\"goerli\"]","import { ACCEPTABLE_NETWORKS } from \"@/const/acceptableNetworks\"\n\nexport default class TransferValidator {\n    static ValidateNetwork(network: string): boolean {\n        return ACCEPTABLE_NETWORKS.indexOf(network) !== -1\n    }\n\n    static ValidateAddress(address: string, yourAddress: string): boolean {\n        return address.length > 0 && address !== yourAddress\n    }\n\n    static ValidateAmount(amount: string, yourBalance: string): boolean {\n        const checkForZeroAmount = (_amount: string) =>\n            _amount.split('.').map(a => Number(a)).filter(a => a !== 0).length !== 0\n\n        try {\n            return amount.length > 0 && amount.split(\".\").length === 2\n                && checkForZeroAmount(amount) && amount <= yourBalance\n        }\n        catch {\n            return false\n        }\n    }\n}","import printError from \"@/helpers/printError\"\n\nexport default class WalletTransferFacade {\n    static async TransferMoney(signer: any, transaction: any) {\n        try {\n            const t = await signer.sendTransaction(transaction)\n            return t.hash\n        }\n        catch {\n            printError(\"Operation canceled\")\n            return -1\n        }\n    }\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport TransferPage from \"@/pages/TransferPage\"\nimport { ref } from \"vue\"\nimport { useRouter } from \"vue-router\"\nimport { WalletType } from \"@/helpers/WalletConnection/WalletType\"\nimport ConnectionFactory from \"@/helpers/WalletConnection/ConnectionFactory\"\nimport TransferValidator from \"@/helpers/TransferValidator\"\nimport WalletTransferFacade from \"@/helpers/WalletTransferFacade\"\nimport { ACCEPTABLE_NETWORKS } from \"@/const/acceptableNetworks\"\nimport { ethers } from \"ethers\"\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'TransferPageController',\n  setup(__props) {\n\nconst router = useRouter()\n\nlet inputsData = ref({\n    inputAddress: {\n        title: \"Address\",\n        input: \"\",\n        error: false,\n    },\n    inputAmount: {\n        title: \"Amount\",\n        input: \"\",\n        error: false\n    }\n})\n\nlet acceptableNetworkError = ref(false)\n\nfunction updateInputAddress(value: string) {\n    inputsData.value.inputAddress.input = value\n}\nfunction updateInputAmount(value: string) {\n    inputsData.value.inputAmount.input = value\n}\nfunction redirectWalletPage() {\n    router.push(\"/wallet\")\n}\nasync function transferCurrency() {\n\n    const connection = ConnectionFactory.GetWalletConnection(WalletType.MetaMask)\n    const provider = connection.getProvider()\n    const signer = await provider.getSigner()\n    const address = await signer.getAddress()\n    const yourBalance = await connection.getBalance(address)\n    const network = await connection.getNetwork()\n\n    acceptableNetworkError.value = !TransferValidator.ValidateNetwork(network.name)\n\n    if (acceptableNetworkError.value) {\n        alert(`This wallet works only with ${ ACCEPTABLE_NETWORKS.join(',') } networks`)\n        return\n    }\n\n    inputsData.value.inputAddress.error =\n        !TransferValidator.ValidateAddress(inputsData.value.inputAddress.input, address)\n    inputsData.value.inputAmount.error =\n        !TransferValidator.ValidateAmount(inputsData.value.inputAmount.input, ethers.utils.formatEther(yourBalance))\n\n    if (inputsData.value.inputAddress.error || inputsData.value.inputAmount.error) return\n\n    const gasPrice = await connection.getGasPrice()\n\n    const transaction = {\n        from: address,\n        to: inputsData.value.inputAddress.input,\n        value: ethers.utils.parseEther(inputsData.value.inputAmount.input),\n        gasLimit: ethers.utils.hexlify(100000),\n        gasPrice: gasPrice\n    }\n\n    const hash = await WalletTransferFacade.TransferMoney(signer, transaction)\n\n    if (hash !== -1) {\n        await router.push(`/status/${ hash }`)\n    }\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(_unref(TransferPage), {\n    \"inputs-data\": _unref(inputsData),\n    onUpdateInputAddress: updateInputAddress,\n    onUpdateInputAmount: updateInputAmount,\n    onRedirectWalletPage: redirectWalletPage,\n    onTransferCurrency: transferCurrency\n  }, null, 8, [\"inputs-data\"]))\n}\n}\n\n})","import script from \"./TransferPageController.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./TransferPageController.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_renderSlot","_ctx","script","__exports__","render","_hoisted_2","_defineComponent","__name","props","inputValue","String","title","error","type","Boolean","default","errorText","emits","setup","__props","emit","updateInputValue","event","target","value","_cache","_openBlock","_createVNode","BaseTitleRow","_createElementVNode","onInput","placeholder","_Transition","name","_withCtx","_withDirectives","_unref","BaseWarning","style","_createTextVNode","_toDisplayString","_","_vShow","inputsData","Object","redirectWalletPage","transferCurrency","_Fragment","_renderList","keys","input","_createBlock","BaseInput","key","onUpdateInputValue","toLowerCase","BaseButton","onClick","ACCEPTABLE_NETWORKS","TransferValidator","static","network","indexOf","address","yourAddress","length","amount","yourBalance","checkForZeroAmount","_amount","split","map","a","Number","filter","WalletTransferFacade","signer","transaction","t","sendTransaction","hash","printError","router","useRouter","ref","inputAddress","inputAmount","acceptableNetworkError","updateInputAddress","updateInputAmount","push","async","connection","ConnectionFactory","WalletType","provider","getProvider","getSigner","getAddress","getBalance","getNetwork","ValidateNetwork","alert","join","ValidateAddress","ValidateAmount","ethers","gasPrice","getGasPrice","from","to","gasLimit","TransferMoney","TransferPage","onUpdateInputAddress","onUpdateInputAmount","onRedirectWalletPage","onTransferCurrency"],"sourceRoot":""}