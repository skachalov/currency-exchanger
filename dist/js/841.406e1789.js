"use strict";(self["webpackChunkcurrency_exchanger"]=self["webpackChunkcurrency_exchanger"]||[]).push([[841],{4381:function(t,e,n){n.d(e,{Z:function(){return l}});var a=n(3396);const r={class:"base-warning"};function u(t,e){return(0,a.wg)(),(0,a.iD)("div",r,[(0,a.WI)(t.$slots,"default",{},void 0,!0)])}var i=n(89);const s={},o=(0,i.Z)(s,[["render",u],["__scopeId","data-v-3d99b0b5"]]);var l=o},7841:function(t,e,n){n.r(e),n.d(e,{default:function(){return S}});n(7658);var a=n(3396),r=n(4870),u=n(9242),i=n(7139),s=n(4381),o=n(2772);const l={class:"base-input-container"},c=["value"];var p=(0,a.aZ)({__name:"BaseInput",props:{inputValue:String,title:String,error:{type:Boolean,default:!1},errorText:String},emits:["updateInputValue"],setup(t,{emit:e}){const n=t;function p(t){e("updateInputValue",t.target.value,n.title)}return(e,n)=>((0,a.wg)(),(0,a.iD)("div",l,[(0,a.Wm)(o.Z,{title:t.title},null,8,["title"]),(0,a._)("input",{class:"base-input",value:t.inputValue,onInput:p,placeholder:"Input..."},null,40,c),(0,a.Wm)(u.uT,{name:"base-warning-transition"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)((0,r.SU)(s.Z),{style:{"margin-top":"5px"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(t.errorText),1)])),_:1},512),[[u.F8,t.error]])])),_:1})]))}}),d=n(89);const v=(0,d.Z)(p,[["__scopeId","data-v-86464a2e"]]);var f=v,g=n(970);const m={class:"button-container"};var w=(0,a.aZ)({__name:"TransferPage",props:{inputsData:Object},emits:["updateInputAddress","updateInputAmount","redirectWalletPage","transferCurrency"],setup(t,{emit:e}){function n(t,n){switch(n){case"Address":e("updateInputAddress",t);break;case"Amount":e("updateInputAmount",t);break}}function u(){e("redirectWalletPage")}function i(){e("transferCurrency")}return(e,s)=>((0,a.wg)(),(0,a.iD)(a.HY,null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Object.keys(t.inputsData),(e=>((0,a.wg)(),(0,a.j4)((0,r.SU)(f),{key:t.inputsData[e].title,title:t.inputsData[e].title,"input-value":t.inputsData[e].input,onUpdateInputValue:n,error:t.inputsData[e].error,"error-text":`Incorrect ${t.inputsData[e].title.toLowerCase()}`},null,8,["title","input-value","error","error-text"])))),128)),(0,a._)("div",m,[(0,a.Wm)(g.Z,{title:"cancel","icon-name":"arrow-rotate-left",onClick:u}),(0,a.Wm)(g.Z,{title:"send","icon-name":"arrow-up",onClick:i})])],64))}});const A=(0,d.Z)(w,[["__scopeId","data-v-fa3aa3c4"]]);var h=A,_=n(2483),k=n(7584),y=n(9998);const I=["goerli"];class b{static ValidateNetwork(t){return-1!==I.indexOf(t)}static ValidateAddress(t,e){return t.length>0&&t!==e}static ValidateAmount(t,e){const n=t=>0!==t.split(".").map((t=>Number(t))).filter((t=>0!==t)).length;try{return t.length>0&&2===t.split(".").length&&n(t)&&t<=e}catch{return!1}}}var Z=n(2705);class D{static async TransferMoney(t,e){try{const n=await t.sendTransaction(e);return n.hash}catch{return(0,Z.Z)("Operation canceled"),-1}}}var V=n(7647),C=n(6482),T=(0,a.aZ)({__name:"TransferPageController",setup(t){const e=(0,_.tv)();let n=(0,r.iH)({inputAddress:{title:"Address",input:"",error:!1},inputAmount:{title:"Amount",input:"",error:!1}}),u=(0,r.iH)(!1);function i(t){n.value.inputAddress.input=t}function s(t){n.value.inputAmount.input=t}function o(){e.push("/wallet")}async function l(){const t=y.Z.GetWalletConnection(k.S.MetaMask),a=t.getProvider(),r=await a.getSigner(),i=await r.getAddress(),s=await t.getBalance(i),o=await t.getNetwork();if(u.value=!b.ValidateNetwork(o.name),u.value)return void alert(`This wallet works only with ${I.join(",")} networks`);if(n.value.inputAddress.error=!b.ValidateAddress(n.value.inputAddress.input,i),n.value.inputAmount.error=!b.ValidateAmount(n.value.inputAmount.input,V.dF(s)),n.value.inputAddress.error||n.value.inputAmount.error)return;const l=await t.getGasPrice(),c={from:i,to:n.value.inputAddress.input,value:V.fi(n.value.inputAmount.input),gasLimit:C.Dv(1e5),gasPrice:l},p=await D.TransferMoney(r,c);-1!==p&&await e.push(`/status/${p}`)}return(t,e)=>((0,a.wg)(),(0,a.j4)((0,r.SU)(h),{"inputs-data":(0,r.SU)(n),onUpdateInputAddress:i,onUpdateInputAmount:s,onRedirectWalletPage:o,onTransferCurrency:l},null,8,["inputs-data"]))}});const W=T;var S=W}}]);
//# sourceMappingURL=841.406e1789.js.map