"use strict";(self["webpackChunkcurrency_exchanger"]=self["webpackChunkcurrency_exchanger"]||[]).push([[197],{6771:function(t,e,n){function a(t,e){return{status:t,description:e}}n.d(e,{Z:function(){return a}})},5943:function(t,e,n){n.d(e,{Z:function(){return p}});var a=n(3396),i=n(9242),r=n(7139),u=n(4870);const o={key:0,class:"base-notification"};var s=(0,a.aZ)({__name:"BaseNotification",props:{notification:{type:String,default:""}},emits:["clearNotification"],setup(t,{emit:e}){const n=t,s=(0,u.iH)("");return(0,a.YP)((()=>n.notification),(()=>{s.value=n.notification,setTimeout((()=>{s.value="",e("clearNotification")}),3e3)})),(t,e)=>((0,a.wg)(),(0,a.j4)(i.uT,{name:"notification-transition"},{default:(0,a.w5)((()=>[s.value.length?((0,a.wg)(),(0,a.iD)("div",o,(0,r.zw)(s.value),1)):(0,a.kq)("",!0)])),_:1}))}}),l=n(89);const c=(0,l.Z)(s,[["__scopeId","data-v-f227d502"]]);var p=c},4381:function(t,e,n){n.d(e,{Z:function(){return l}});var a=n(3396);const i={class:"base-warning"};function r(t,e){return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.WI)(t.$slots,"default",{},void 0,!0)])}var u=n(89);const o={},s=(0,u.Z)(o,[["render",r],["__scopeId","data-v-3d99b0b5"]]);var l=s},3197:function(t,e,n){n.r(e),n.d(e,{default:function(){return W}});n(7658);var a=n(3396),i=n(4870),r=n(9242),u=n(7139),o=n(4381),s=n(2772);const l={class:"base-input-container"},c=["value"];var p=(0,a.aZ)({__name:"BaseInput",props:{inputValue:String,title:String,error:{type:Boolean,default:!1},errorText:String},emits:["updateInputValue"],setup(t,{emit:e}){const n=t;function p(t){e("updateInputValue",t.target.value,n.title)}return(e,n)=>((0,a.wg)(),(0,a.iD)("div",l,[(0,a.Wm)(s.Z,{title:t.title},null,8,["title"]),(0,a._)("input",{class:"base-input",value:t.inputValue,onInput:p,placeholder:"Input..."},null,40,c),(0,a.Wm)(r.uT,{name:"base-warning-transition"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)((0,i.SU)(o.Z),{style:{"margin-top":"5px"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(t.errorText),1)])),_:1},512),[[r.F8,t.error]])])),_:1})]))}}),d=n(89);const f=(0,d.Z)(p,[["__scopeId","data-v-86464a2e"]]);var v=f,m=n(1138),g=n(5943);const w={class:"button-container"};var A=(0,a.aZ)({__name:"TransferPage",props:{inputsData:Object,notification:String},emits:["updateInputAddress","updateInputAmount","redirectWalletPage","transferCurrency","clearNotification"],setup(t,{emit:e}){function n(t,n){switch(n){case"Address":e("updateInputAddress",t);break;case"Amount":e("updateInputAmount",t);break}}function r(){e("redirectWalletPage")}function u(){e("transferCurrency")}function o(){e("clearNotification")}return(e,s)=>((0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(g.Z,{notification:t.notification,onClearNotification:o},null,8,["notification"]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Object.keys(t.inputsData),(e=>((0,a.wg)(),(0,a.j4)((0,i.SU)(v),{key:t.inputsData[e].title,title:t.inputsData[e].title,"input-value":t.inputsData[e].input,onUpdateInputValue:n,error:t.inputsData[e].error,"error-text":`Incorrect ${t.inputsData[e].title.toLowerCase()}`},null,8,["title","input-value","error","error-text"])))),128)),(0,a._)("div",w,[(0,a.Wm)(m.Z,{title:"cancel","icon-name":"arrow-rotate-left",onClick:r}),(0,a.Wm)(m.Z,{title:"send","icon-name":"arrow-up",onClick:u})])],64))}});const _=(0,d.Z)(A,[["__scopeId","data-v-5eeab7d2"]]);var h=_,k=n(2483),y=n(7584),Z=n(639);const I=["goerli"];class b{static ValidateNetwork(t){return-1!==I.indexOf(t)}static ValidateAddress(t,e){return t.length>0&&t!==e}static ValidateAmount(t,e){const n=t=>0!==t.split(".").map((t=>Number(t))).filter((t=>0!==t)).length;try{return t.length>0&&2===t.split(".").length&&n(t)&&t<=e}catch{return!1}}}var D=n(6771);class C{static async TransferMoney(t,e){try{const n=await t.sendTransaction(e);return(0,D.Z)(1,n.hash)}catch{return(0,D.Z)(-1,"Operation canceled")}}}var S=n(7647),T=n(6482),N=(0,a.aZ)({__name:"TransferPageController",setup(t){const e=(0,k.tv)();let n=(0,i.iH)({inputAddress:{title:"Address",input:"",error:!1},inputAmount:{title:"Amount",input:"",error:!1}}),r=(0,i.iH)(!1);function u(t){n.value.inputAddress.input=t}function o(t){n.value.inputAmount.input=t}function s(){e.push("/wallet")}let l=(0,i.iH)("");async function c(){const t=Z.Z.GetWalletConnection(y.S.MetaMask),a=t.getProvider(),i=await a.getSigner(),u=await i.getAddress(),o=await t.getBalance(u),s=await t.getNetwork();if(r.value=!b.ValidateNetwork(s.name),r.value)return void(l.value=`This wallet works only with ${I.join(",")} networks`);if(n.value.inputAddress.error=!b.ValidateAddress(n.value.inputAddress.input,u),n.value.inputAmount.error=!b.ValidateAmount(n.value.inputAmount.input,S.dF(o)),n.value.inputAddress.error||n.value.inputAmount.error)return;const c=await t.getGasPrice(),p={from:u,to:n.value.inputAddress.input,value:S.fi(n.value.inputAmount.input),gasLimit:T.Dv(1e5),gasPrice:c},d=await C.TransferMoney(i,p);-1!==d.status?await e.push(`/status/${d.description}`):l.value=d.description}function p(){l.value=""}return(t,e)=>((0,a.wg)(),(0,a.j4)((0,i.SU)(h),{"inputs-data":(0,i.SU)(n),notification:(0,i.SU)(l),onUpdateInputAddress:u,onUpdateInputAmount:o,onRedirectWalletPage:s,onTransferCurrency:c,onClearNotification:p},null,8,["inputs-data","notification"]))}});const V=N;var W=V}}]);
//# sourceMappingURL=197.7bc386a3.js.map